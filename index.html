<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆè¡¨ç¤ºã‚¢ãƒ—ãƒª</title>
    <!-- Tailwind CSS (ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ç”¨) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Noto Sans JP) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f1f5f9; /* Slate-100: è½ã¡ç€ã„ãŸèƒŒæ™¯è‰² */
        }
        /* é‡‘é¡è¡¨ç¤ºã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ */
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-slate-700">

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="bg-slate-800 text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-teal-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Exchange Rate View
                </h1>
                <p class="text-sm text-slate-400 hidden sm:block">ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„ç‚ºæ›¿è¨ˆç®—æ©Ÿ</p>
            </div>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="container mx-auto px-4 py-8 max-w-4xl">
        
        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³1: é€šè²¨æ›ç®—è¨ˆç®—æ©Ÿ -->
        <section class="bg-white rounded-xl shadow-md p-6 mb-8 border-t-4 border-teal-500">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2 text-slate-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                </svg>
                æ—¥æœ¬å††æ›ç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
                <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
                <div class="space-y-4">
                    <div>
                        <label for="jpy-input" class="block text-sm font-medium text-slate-600 mb-1">æ—¥æœ¬å†† (JPY)</label>
                        <div class="relative">
                            <input type="number" id="jpy-input" placeholder="é‡‘é¡ã‚’å…¥åŠ› (ä¾‹: 1000)" 
                                class="w-full p-3 pl-4 pr-12 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 outline-none transition"
                                min="0" step="1">
                            <span class="absolute right-4 top-3 text-slate-400 font-medium">å††</span>
                        </div>
                        <p id="error-message" class="text-red-500 text-sm mt-1 hidden">â€» æœ‰åŠ¹ãªé‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</p>
                    </div>

                    <div>
                        <label for="currency-select" class="block text-sm font-medium text-slate-600 mb-1">æ›ç®—å…ˆã®é€šè²¨</label>
                        <select id="currency-select" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-teal-500 outline-none bg-white">
                            <!-- JSã§å‹•çš„ã«ç”Ÿæˆ -->
                        </select>
                    </div>
                    
                    <button id="calc-btn" class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 rounded-lg transition shadow-md active:transform active:scale-95">
                        æ›ç®—ã™ã‚‹
                    </button>
                </div>

                <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
                <div class="bg-slate-50 rounded-lg p-6 border border-slate-200 flex flex-col items-center justify-center h-full min-h-[200px]">
                    <p class="text-sm text-slate-500 mb-2">æ›ç®—çµæœ</p>
                    <div id="result-area" class="text-center">
                        <span id="result-value" class="text-4xl font-bold text-slate-800 tracking-tight">-</span>
                        <span id="result-unit" class="text-xl text-slate-600 ml-2"></span>
                    </div>
                    <p id="rate-info" class="text-xs text-slate-400 mt-4">ãƒ¬ãƒ¼ãƒˆ: -</p>
                </div>
            </div>
        </section>

        <!-- ã‚»ã‚¯ã‚·ãƒ§ãƒ³2: ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆä¸€è¦§ -->
        <section class="bg-white rounded-xl shadow-md p-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold text-slate-800 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-teal-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    ä¸»è¦é€šè²¨ãƒ¬ãƒ¼ãƒˆä¸€è¦§
                </h2>
                <span class="text-xs bg-slate-100 text-slate-500 px-2 py-1 rounded">å¯¾ æ—¥æœ¬å†† (JPY)</span>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-50 border-b border-slate-200 text-slate-600 text-sm uppercase">
                            <th class="p-4 font-semibold">å›½æ—— / é€šè²¨</th>
                            <th class="p-4 font-semibold">ã‚³ãƒ¼ãƒ‰</th>
                            <th class="p-4 font-semibold text-right">ç¾åœ¨ã®ãƒ¬ãƒ¼ãƒˆ (å††)</th>
                        </tr>
                    </thead>
                    <tbody id="rates-table-body" class="text-slate-700">
                        <!-- JSã§å‹•çš„ã«ç”Ÿæˆ -->
                    </tbody>
                </table>
            </div>
            <p class="text-right text-xs text-slate-400 mt-4">* ãƒ‡ãƒ¼ã‚¿ã¯ã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚å®Ÿéš›ã®å–å¼•ãƒ¬ãƒ¼ãƒˆã¨ã¯ç•°ãªã‚Šã¾ã™ã€‚</p>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-400 py-6 mt-12 text-center text-sm">
        <p>&copy; 2024 Exchange Rate View App. All rights reserved.</p>
    </footer>

    <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ -->
    <script>
        /**
         * ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿å®šç¾© (JSONãƒ•ã‚¡ã‚¤ãƒ«ã®ä»£ã‚ã‚Š)
         * rate: 1å˜ä½ã‚ãŸã‚Šã®æ—¥æœ¬å††ä¾¡æ ¼ (ä¾‹: 1 USD = 145.50 JPY)
         */
        const currencyData = [
            { code: "USD", name: "ç±³ãƒ‰ãƒ«", flag: "ğŸ‡ºğŸ‡¸", rate: 149.50, locale: "en-US" },
            { code: "EUR", name: "ãƒ¦ãƒ¼ãƒ­", flag: "ğŸ‡ªğŸ‡º", rate: 161.20, locale: "de-DE" },
            { code: "GBP", name: "è‹±ãƒãƒ³ãƒ‰", flag: "ğŸ‡¬ğŸ‡§", rate: 188.40, locale: "en-GB" },
            { code: "AUD", name: "è±ªãƒ‰ãƒ«", flag: "ğŸ‡¦ğŸ‡º", rate: 97.80, locale: "en-AU" },
            { code: "CAD", name: "ã‚«ãƒŠãƒ€ãƒ‰ãƒ«", flag: "ğŸ‡¨ğŸ‡¦", rate: 110.15, locale: "en-CA" },
            { code: "KRW", name: "éŸ“å›½ã‚¦ã‚©ãƒ³", flag: "ğŸ‡°ğŸ‡·", rate: 0.11, locale: "ko-KR" }, // 1ã‚¦ã‚©ãƒ³ã‚ãŸã‚Šã®å††
            { code: "CNY", name: "ä¸­å›½å…ƒ", flag: "ğŸ‡¨ğŸ‡³", rate: 20.80, locale: "zh-CN" },
            { code: "CHF", name: "ã‚¹ã‚¤ã‚¹ãƒ•ãƒ©ãƒ³", flag: "ğŸ‡¨ğŸ‡­", rate: 168.90, locale: "de-CH" }
        ];

        // DOMè¦ç´ ã®å–å¾—
        const jpyInput = document.getElementById('jpy-input');
        const currencySelect = document.getElementById('currency-select');
        const calcBtn = document.getElementById('calc-btn');
        const resultValue = document.getElementById('result-value');
        const resultUnit = document.getElementById('result-unit');
        const rateInfo = document.getElementById('rate-info');
        const errorMessage = document.getElementById('error-message');
        const tableBody = document.getElementById('rates-table-body');

        /**
         * åˆæœŸåŒ–å‡¦ç†
         */
        function init() {
            renderSelectOptions();
            renderTable();
            
            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼è¨­å®š
            calcBtn.addEventListener('click', calculateExchange);
            
            // Enterã‚­ãƒ¼ã§è¨ˆç®—å®Ÿè¡Œ
            jpyInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') calculateExchange();
            });

            // å…¥åŠ›æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¶ˆã™
            jpyInput.addEventListener('input', () => {
                if(!errorMessage.classList.contains('hidden')) {
                    errorMessage.classList.add('hidden');
                    jpyInput.classList.remove('border-red-500', 'focus:ring-red-500');
                    jpyInput.classList.add('border-slate-300', 'focus:ring-teal-500');
                }
            });
        }

        /**
         * ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ç”Ÿæˆ
         */
        function renderSelectOptions() {
            currencyData.forEach(currency => {
                const option = document.createElement('option');
                option.value = currency.code;
                option.textContent = `${currency.flag} ${currency.name} (${currency.code})`;
                currencySelect.appendChild(option);
            });
        }

        /**
         * ãƒ¬ãƒ¼ãƒˆä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ«ã®æç”»
         */
        function renderTable() {
            tableBody.innerHTML = ''; // ã‚¯ãƒªã‚¢
            currencyData.forEach(currency => {
                const row = document.createElement('tr');
                row.className = "border-b border-slate-100 hover:bg-slate-50 transition";
                
                row.innerHTML = `
                    <td class="p-4 flex items-center gap-3">
                        <span class="text-2xl">${currency.flag}</span>
                        <span class="font-medium">${currency.name}</span>
                    </td>
                    <td class="p-4 text-slate-500 font-mono">${currency.code}</td>
                    <td class="p-4 text-right font-bold text-slate-700">
                        ${currency.rate.toFixed(2)} <span class="text-xs font-normal text-slate-400">JPY</span>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        /**
         * æ›ç®—ãƒ­ã‚¸ãƒƒã‚¯
         */
        function calculateExchange() {
            const amount = parseFloat(jpyInput.value);
            const targetCode = currencySelect.value;
            
            // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: å…¥åŠ›å€¤ãƒã‚§ãƒƒã‚¯
            if (isNaN(amount) || amount < 0 || jpyInput.value.trim() === "") {
                showError();
                return;
            }

            // é¸æŠã•ã‚ŒãŸé€šè²¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
            const targetCurrency = currencyData.find(c => c.code === targetCode);
            
            if (!targetCurrency) {
                alert("é€šè²¨ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚");
                return;
            }

            // è¨ˆç®—: æ—¥æœ¬å†† / ãƒ¬ãƒ¼ãƒˆ = å¤–è²¨é¡
            // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°: 0é™¤ç®—å›é¿ï¼ˆé€šå¸¸ãƒ¬ãƒ¼ãƒˆãŒ0ã«ãªã‚‹ã“ã¨ã¯ãªã„ãŒå¿µã®ãŸã‚ï¼‰
            if (targetCurrency.rate === 0) {
                alert("ãƒ¬ãƒ¼ãƒˆè¨­å®šã‚¨ãƒ©ãƒ¼ã§ã™ã€‚");
                return;
            }

            const convertedAmount = amount / targetCurrency.rate;

            // çµæœè¡¨ç¤ºæ›´æ–°
            updateDisplay(convertedAmount, targetCurrency);
        }

        /**
         * ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºå‡¦ç†
         */
        function showError() {
            errorMessage.classList.remove('hidden');
            jpyInput.classList.remove('border-slate-300', 'focus:ring-teal-500');
            jpyInput.classList.add('border-red-500', 'focus:ring-red-500');
            
            // çµæœã‚’ãƒªã‚»ãƒƒãƒˆ
            resultValue.innerText = "-";
            resultUnit.innerText = "";
            rateInfo.innerText = "ãƒ¬ãƒ¼ãƒˆ: -";
        }

        /**
         * çµæœè¡¨ç¤ºã®æ›´æ–°
         */
        function updateDisplay(amount, currency) {
            // é€šè²¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (ä¾‹: 1,234.56)
            const formatter = new Intl.NumberFormat(currency.locale, {
                style: 'decimal',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã«ã‚¯ãƒ©ã‚¹ã‚’å†é©ç”¨
            const resultArea = document.getElementById('result-area');
            resultArea.classList.remove('fade-in');
            void resultArea.offsetWidth; // ãƒªãƒ•ãƒ­ãƒ¼ç™ºç”Ÿ
            resultArea.classList.add('fade-in');

            resultValue.textContent = formatter.format(amount);
            resultUnit.textContent = currency.code;
            rateInfo.textContent = `ãƒ¬ãƒ¼ãƒˆ: 1 ${currency.code} = ${currency.rate} JPY`;
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹å§‹
        init();
    </script>
</body>
</html>